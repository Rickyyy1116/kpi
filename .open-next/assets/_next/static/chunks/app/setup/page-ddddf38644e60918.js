(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[620],{46858:(e,t,r)=>{Promise.resolve().then(r.bind(r,8078))},8078:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>I});var a=r(99283),s=r(69651),l=r(78544),i=r(74904),n=r(39722),d=r(91508),o=r(37575),c=r(86573),u=r(41111);let m=(0,c.F)("text-sm font-medium leading-none peer-disabled:cursor-not-allowed peer-disabled:opacity-70"),x=s.forwardRef((e,t)=>{let{className:r,...s}=e;return(0,a.jsx)(o.b,{ref:t,className:(0,u.cn)(m(),r),...s})});x.displayName=o.b.displayName;var f=r(84139),h=r(18927),p=r(87622),g=r(14219);let j=f.bL;f.YJ;let b=f.WT,y=s.forwardRef((e,t)=>{let{className:r,children:s,...l}=e;return(0,a.jsxs)(f.l9,{ref:t,className:(0,u.cn)("flex h-10 w-full items-center justify-between rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background placeholder:text-muted-foreground focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 [&>span]:line-clamp-1",r),...l,children:[s,(0,a.jsx)(f.In,{asChild:!0,children:(0,a.jsx)(h.A,{className:"h-4 w-4 opacity-50"})})]})});y.displayName=f.l9.displayName;let v=s.forwardRef((e,t)=>{let{className:r,...s}=e;return(0,a.jsx)(f.PP,{ref:t,className:(0,u.cn)("flex cursor-default items-center justify-center py-1",r),...s,children:(0,a.jsx)(p.A,{className:"h-4 w-4"})})});v.displayName=f.PP.displayName;let N=s.forwardRef((e,t)=>{let{className:r,...s}=e;return(0,a.jsx)(f.wn,{ref:t,className:(0,u.cn)("flex cursor-default items-center justify-center py-1",r),...s,children:(0,a.jsx)(h.A,{className:"h-4 w-4"})})});N.displayName=f.wn.displayName;let w=s.forwardRef((e,t)=>{let{className:r,children:s,position:l="popper",...i}=e;return(0,a.jsx)(f.ZL,{children:(0,a.jsxs)(f.UC,{ref:t,className:(0,u.cn)("relative z-50 max-h-96 min-w-[8rem] overflow-hidden rounded-md border bg-popover text-popover-foreground shadow-md data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2","popper"===l&&"data-[side=bottom]:translate-y-1 data-[side=left]:-translate-x-1 data-[side=right]:translate-x-1 data-[side=top]:-translate-y-1",r),position:l,...i,children:[(0,a.jsx)(v,{}),(0,a.jsx)(f.LM,{className:(0,u.cn)("p-1","popper"===l&&"h-[var(--radix-select-trigger-height)] w-full min-w-[var(--radix-select-trigger-width)]"),children:s}),(0,a.jsx)(N,{})]})})});w.displayName=f.UC.displayName,s.forwardRef((e,t)=>{let{className:r,...s}=e;return(0,a.jsx)(f.JU,{ref:t,className:(0,u.cn)("py-1.5 pl-8 pr-2 text-sm font-semibold",r),...s})}).displayName=f.JU.displayName;let k=s.forwardRef((e,t)=>{let{className:r,children:s,...l}=e;return(0,a.jsxs)(f.q7,{ref:t,className:(0,u.cn)("relative flex w-full cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50",r),...l,children:[(0,a.jsx)("span",{className:"absolute left-2 flex h-3.5 w-3.5 items-center justify-center",children:(0,a.jsx)(f.VF,{children:(0,a.jsx)(g.A,{className:"h-4 w-4"})})}),(0,a.jsx)(f.p4,{children:s})]})});k.displayName=f.q7.displayName,s.forwardRef((e,t)=>{let{className:r,...s}=e;return(0,a.jsx)(f.wv,{ref:t,className:(0,u.cn)("-mx-1 my-1 h-px bg-muted",r),...s})}).displayName=f.wv.displayName;var R=r(13524);let C=s.forwardRef((e,t)=>{let{className:r,...s}=e;return(0,a.jsx)("textarea",{className:(0,u.cn)("flex min-h-[80px] w-full rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50",r),ref:t,...s})});C.displayName="Textarea";var F=r(36313),A=r(42830);function I(){let[e,t]=(0,s.useState)([]),[r,o]=(0,s.useState)([]),[c,u]=(0,s.useState)(!0),[m,f]=(0,s.useState)(""),[h,p]=(0,s.useState)({title:"",description:"",targetValue:"",unit:"",dueDate:"",ownerId:"user_1"}),[g,v]=(0,s.useState)({title:"",targetValue:"",unit:"",direction:"up",frequency:"weekly",ownerId:"user_1"});(0,s.useEffect)(()=>{N()},[]);let N=async()=>{try{let[e,r]=await Promise.all([fetch("/api/goals"),fetch("/api/kpis")]),a=await e.json(),s=await r.json();t(a.goals||[]),o(s.kpis||[]),a.goals&&a.goals.length>0&&f(a.goals[0].id)}catch(e){console.error("Failed to fetch data:",e)}finally{u(!1)}},I=async e=>{e.preventDefault();try{let e=h.dueDate?new Date(h.dueDate).getTime():null;await fetch("/api/goals",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({...h,targetValue:Number(h.targetValue),dueDate:e})}),p({title:"",description:"",targetValue:"",unit:"",dueDate:"",ownerId:"user_1"}),N()}catch(e){console.error("Failed to create goal:",e)}},P=async e=>{if(e.preventDefault(),m)try{await fetch("/api/kpis",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({...g,goalId:m,targetValue:Number(g.targetValue)})}),v({title:"",targetValue:"",unit:"",direction:"up",frequency:"weekly",ownerId:"user_1"}),N()}catch(e){console.error("Failed to create KPI:",e)}},V=async e=>{if(confirm("このKPIを削除しますか？"))try{await fetch("/api/kpis/".concat(e),{method:"DELETE"}),N()}catch(e){console.error("Failed to delete KPI:",e)}};if(c)return(0,a.jsxs)("div",{className:"min-h-screen bg-gray-50",children:[(0,a.jsx)(l.Y,{}),(0,a.jsx)("main",{className:"container mx-auto px-4 py-8",children:(0,a.jsx)("div",{className:"text-center",children:"読み込み中..."})})]});let T=e.find(e=>e.id===m),q=r.filter(e=>e.goalId===m);return(0,a.jsxs)("div",{className:"min-h-screen bg-gray-50",children:[(0,a.jsx)(l.Y,{}),(0,a.jsxs)("main",{className:"container mx-auto px-4 py-8",children:[(0,a.jsx)("h1",{className:"mb-6 text-3xl font-bold",children:"Goal & KPI 設定"}),(0,a.jsxs)("div",{className:"grid gap-6 lg:grid-cols-2",children:[(0,a.jsxs)(n.Zp,{children:[(0,a.jsx)(n.aR,{children:(0,a.jsx)(n.ZB,{children:"Goal作成"})}),(0,a.jsx)(n.Wu,{children:(0,a.jsxs)("form",{onSubmit:I,className:"space-y-4",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)(x,{htmlFor:"goal-title",children:"タイトル"}),(0,a.jsx)(d.p,{id:"goal-title",value:h.title,onChange:e=>p({...h,title:e.target.value}),required:!0})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)(x,{htmlFor:"goal-description",children:"説明"}),(0,a.jsx)(C,{id:"goal-description",value:h.description,onChange:e=>p({...h,description:e.target.value})})]}),(0,a.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)(x,{htmlFor:"goal-target",children:"目標値"}),(0,a.jsx)(d.p,{id:"goal-target",type:"number",value:h.targetValue,onChange:e=>p({...h,targetValue:e.target.value}),required:!0})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)(x,{htmlFor:"goal-unit",children:"単位"}),(0,a.jsx)(d.p,{id:"goal-unit",value:h.unit,onChange:e=>p({...h,unit:e.target.value}),required:!0})]})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)(x,{htmlFor:"goal-due",children:"期限"}),(0,a.jsx)(d.p,{id:"goal-due",type:"date",value:h.dueDate,onChange:e=>p({...h,dueDate:e.target.value})})]}),(0,a.jsxs)(i.$,{type:"submit",className:"w-full",children:[(0,a.jsx)(F.A,{className:"mr-2 h-4 w-4"}),"Goalを作成"]})]})})]}),(0,a.jsxs)(n.Zp,{children:[(0,a.jsx)(n.aR,{children:(0,a.jsx)(n.ZB,{children:"Goal一覧"})}),(0,a.jsx)(n.Wu,{children:0===e.length?(0,a.jsx)("p",{className:"text-sm text-muted-foreground",children:"Goalがありません"}):(0,a.jsx)("div",{className:"space-y-2",children:e.map(e=>(0,a.jsxs)("div",{onClick:()=>f(e.id),className:"cursor-pointer rounded-lg border p-4 transition-colors ".concat(m===e.id?"border-primary bg-primary/5":"hover:bg-accent"),children:[(0,a.jsx)("div",{className:"font-medium",children:e.title}),(0,a.jsxs)("div",{className:"text-sm text-muted-foreground",children:["目標: ",e.targetValue,e.unit,e.dueDate&&(0,a.jsxs)(a.Fragment,{children:[" \xb7 期限: ",new Date(e.dueDate).toLocaleDateString("ja-JP")]})]})]},e.id))})})]})]}),T&&(0,a.jsxs)(n.Zp,{className:"mt-6",children:[(0,a.jsx)(n.aR,{children:(0,a.jsxs)(n.ZB,{children:[T.title," の KPI"]})}),(0,a.jsxs)(n.Wu,{className:"space-y-6",children:[(0,a.jsxs)("form",{onSubmit:P,className:"space-y-4 rounded-lg border p-4",children:[(0,a.jsx)("h3",{className:"font-medium",children:"KPI追加"}),(0,a.jsxs)("div",{className:"grid gap-4 md:grid-cols-2",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)(x,{htmlFor:"kpi-title",children:"KPIタイトル"}),(0,a.jsx)(d.p,{id:"kpi-title",value:g.title,onChange:e=>v({...g,title:e.target.value}),required:!0})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)(x,{htmlFor:"kpi-target",children:"目標値"}),(0,a.jsx)(d.p,{id:"kpi-target",type:"number",value:g.targetValue,onChange:e=>v({...g,targetValue:e.target.value}),required:!0})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)(x,{htmlFor:"kpi-unit",children:"単位"}),(0,a.jsx)(d.p,{id:"kpi-unit",value:g.unit,onChange:e=>v({...g,unit:e.target.value}),required:!0})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)(x,{htmlFor:"kpi-direction",children:"方向"}),(0,a.jsxs)(j,{value:g.direction,onValueChange:e=>v({...g,direction:e}),children:[(0,a.jsx)(y,{id:"kpi-direction",children:(0,a.jsx)(b,{})}),(0,a.jsxs)(w,{children:[(0,a.jsx)(k,{value:"up",children:"↑ 増やす"}),(0,a.jsx)(k,{value:"down",children:"↓ 減らす"})]})]})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)(x,{htmlFor:"kpi-frequency",children:"頻度"}),(0,a.jsxs)(j,{value:g.frequency,onValueChange:e=>v({...g,frequency:e}),children:[(0,a.jsx)(y,{id:"kpi-frequency",children:(0,a.jsx)(b,{})}),(0,a.jsxs)(w,{children:[(0,a.jsx)(k,{value:"daily",children:"日次"}),(0,a.jsx)(k,{value:"weekly",children:"週次"}),(0,a.jsx)(k,{value:"monthly",children:"月次"})]})]})]})]}),(0,a.jsxs)(i.$,{type:"submit",className:"w-full",children:[(0,a.jsx)(F.A,{className:"mr-2 h-4 w-4"}),"KPIを追加"]})]}),0===q.length?(0,a.jsx)("p",{className:"text-sm text-muted-foreground",children:"KPIがありません"}):(0,a.jsxs)(R.XI,{children:[(0,a.jsx)(R.A0,{children:(0,a.jsxs)(R.Hj,{children:[(0,a.jsx)(R.nd,{children:"タイトル"}),(0,a.jsx)(R.nd,{children:"目標"}),(0,a.jsx)(R.nd,{children:"方向"}),(0,a.jsx)(R.nd,{children:"頻度"}),(0,a.jsx)(R.nd,{className:"w-[100px]",children:"操作"})]})}),(0,a.jsx)(R.BF,{children:q.map(e=>(0,a.jsxs)(R.Hj,{children:[(0,a.jsx)(R.nA,{className:"font-medium",children:e.title}),(0,a.jsxs)(R.nA,{children:[e.targetValue,e.unit]}),(0,a.jsx)(R.nA,{children:"up"===e.direction?"↑ 増やす":"↓ 減らす"}),(0,a.jsx)(R.nA,{children:"daily"===e.frequency?"日次":"weekly"===e.frequency?"週次":"月次"}),(0,a.jsx)(R.nA,{children:(0,a.jsx)(i.$,{variant:"ghost",size:"sm",onClick:()=>V(e.id),children:(0,a.jsx)(A.A,{className:"h-4 w-4"})})})]},e.id))})]})]})]})]})]})}},78544:(e,t,r)=>{"use strict";r.d(t,{Y:()=>o});var a=r(99283),s=r(21661),l=r.n(s),i=r(72388),n=r(34659),d=r(34196);function o(){return(0,a.jsx)("header",{className:"border-b bg-white",children:(0,a.jsxs)("div",{className:"container mx-auto flex h-16 items-center justify-between px-4",children:[(0,a.jsxs)("div",{className:"flex items-center space-x-6",children:[(0,a.jsxs)(l(),{href:"/",className:"flex items-center space-x-2",children:[(0,a.jsx)(i.A,{className:"h-6 w-6 text-primary"}),(0,a.jsx)("span",{className:"text-xl font-bold",children:"KPI管理"})]}),(0,a.jsxs)("nav",{className:"flex items-center space-x-4",children:[(0,a.jsxs)(l(),{href:"/",className:"flex items-center space-x-1 text-sm font-medium text-gray-700 hover:text-primary",children:[(0,a.jsx)(n.A,{className:"h-4 w-4"}),(0,a.jsx)("span",{children:"ダッシュボード"})]}),(0,a.jsxs)(l(),{href:"/setup",className:"flex items-center space-x-1 text-sm font-medium text-gray-700 hover:text-primary",children:[(0,a.jsx)(d.A,{className:"h-4 w-4"}),(0,a.jsx)("span",{children:"設定"})]})]})]}),(0,a.jsx)("div",{className:"flex items-center space-x-2",children:(0,a.jsx)("span",{className:"text-sm text-muted-foreground",children:"ユーザー: A"})})]})})}},74904:(e,t,r)=>{"use strict";r.d(t,{$:()=>o});var a=r(99283),s=r(69651),l=r(53141),i=r(86573),n=r(41111);let d=(0,i.F)("inline-flex items-center justify-center whitespace-nowrap rounded-md text-sm font-medium ring-offset-background transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50",{variants:{variant:{default:"bg-primary text-primary-foreground hover:bg-primary/90",destructive:"bg-destructive text-destructive-foreground hover:bg-destructive/90",outline:"border border-input bg-background hover:bg-accent hover:text-accent-foreground",secondary:"bg-secondary text-secondary-foreground hover:bg-secondary/80",ghost:"hover:bg-accent hover:text-accent-foreground",link:"text-primary underline-offset-4 hover:underline"},size:{default:"h-10 px-4 py-2",sm:"h-9 rounded-md px-3",lg:"h-11 rounded-md px-8",icon:"h-10 w-10"}},defaultVariants:{variant:"default",size:"default"}}),o=s.forwardRef((e,t)=>{let{className:r,variant:s,size:i,asChild:o=!1,...c}=e,u=o?l.DX:"button";return(0,a.jsx)(u,{className:(0,n.cn)(d({variant:s,size:i,className:r})),ref:t,...c})});o.displayName="Button"},39722:(e,t,r)=>{"use strict";r.d(t,{Wu:()=>o,ZB:()=>d,Zp:()=>i,aR:()=>n});var a=r(99283),s=r(69651),l=r(41111);let i=s.forwardRef((e,t)=>{let{className:r,...s}=e;return(0,a.jsx)("div",{ref:t,className:(0,l.cn)("rounded-lg border bg-card text-card-foreground shadow-sm",r),...s})});i.displayName="Card";let n=s.forwardRef((e,t)=>{let{className:r,...s}=e;return(0,a.jsx)("div",{ref:t,className:(0,l.cn)("flex flex-col space-y-1.5 p-6",r),...s})});n.displayName="CardHeader";let d=s.forwardRef((e,t)=>{let{className:r,...s}=e;return(0,a.jsx)("h3",{ref:t,className:(0,l.cn)("text-2xl font-semibold leading-none tracking-tight",r),...s})});d.displayName="CardTitle",s.forwardRef((e,t)=>{let{className:r,...s}=e;return(0,a.jsx)("p",{ref:t,className:(0,l.cn)("text-sm text-muted-foreground",r),...s})}).displayName="CardDescription";let o=s.forwardRef((e,t)=>{let{className:r,...s}=e;return(0,a.jsx)("div",{ref:t,className:(0,l.cn)("p-6 pt-0",r),...s})});o.displayName="CardContent",s.forwardRef((e,t)=>{let{className:r,...s}=e;return(0,a.jsx)("div",{ref:t,className:(0,l.cn)("flex items-center p-6 pt-0",r),...s})}).displayName="CardFooter"},91508:(e,t,r)=>{"use strict";r.d(t,{p:()=>i});var a=r(99283),s=r(69651),l=r(41111);let i=s.forwardRef((e,t)=>{let{className:r,type:s,...i}=e;return(0,a.jsx)("input",{type:s,className:(0,l.cn)("flex h-10 w-full rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background file:border-0 file:bg-transparent file:text-sm file:font-medium placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50",r),ref:t,...i})});i.displayName="Input"},13524:(e,t,r)=>{"use strict";r.d(t,{A0:()=>n,BF:()=>d,Hj:()=>o,XI:()=>i,nA:()=>u,nd:()=>c});var a=r(99283),s=r(69651),l=r(41111);let i=s.forwardRef((e,t)=>{let{className:r,...s}=e;return(0,a.jsx)("div",{className:"relative w-full overflow-auto",children:(0,a.jsx)("table",{ref:t,className:(0,l.cn)("w-full caption-bottom text-sm",r),...s})})});i.displayName="Table";let n=s.forwardRef((e,t)=>{let{className:r,...s}=e;return(0,a.jsx)("thead",{ref:t,className:(0,l.cn)("[&_tr]:border-b",r),...s})});n.displayName="TableHeader";let d=s.forwardRef((e,t)=>{let{className:r,...s}=e;return(0,a.jsx)("tbody",{ref:t,className:(0,l.cn)("[&_tr:last-child]:border-0",r),...s})});d.displayName="TableBody",s.forwardRef((e,t)=>{let{className:r,...s}=e;return(0,a.jsx)("tfoot",{ref:t,className:(0,l.cn)("border-t bg-muted/50 font-medium [&>tr]:last:border-b-0",r),...s})}).displayName="TableFooter";let o=s.forwardRef((e,t)=>{let{className:r,...s}=e;return(0,a.jsx)("tr",{ref:t,className:(0,l.cn)("border-b transition-colors hover:bg-muted/50 data-[state=selected]:bg-muted",r),...s})});o.displayName="TableRow";let c=s.forwardRef((e,t)=>{let{className:r,...s}=e;return(0,a.jsx)("th",{ref:t,className:(0,l.cn)("h-12 px-4 text-left align-middle font-medium text-muted-foreground [&:has([role=checkbox])]:pr-0",r),...s})});c.displayName="TableHead";let u=s.forwardRef((e,t)=>{let{className:r,...s}=e;return(0,a.jsx)("td",{ref:t,className:(0,l.cn)("p-4 align-middle [&:has([role=checkbox])]:pr-0",r),...s})});u.displayName="TableCell",s.forwardRef((e,t)=>{let{className:r,...s}=e;return(0,a.jsx)("caption",{ref:t,className:(0,l.cn)("mt-4 text-sm text-muted-foreground",r),...s})}).displayName="TableCaption"},41111:(e,t,r)=>{"use strict";r.d(t,{cn:()=>l});var a=r(68533),s=r(31408);function l(){for(var e=arguments.length,t=Array(e),r=0;r<e;r++)t[r]=arguments[r];return(0,s.QP)((0,a.$)(t))}}},e=>{var t=t=>e(e.s=t);e.O(0,[208,523,168,487,358],()=>t(46858)),_N_E=e.O()}]);