"use strict";exports.id=87,exports.ids=[87],exports.modules={12860:(e,t,n)=>{n.d(t,{Q:()=>r});var i=n(73211);class r{static [i.i]="ColumnBuilder";config;constructor(e,t,n){this.config={name:e,keyAsName:""===e,notNull:!1,default:void 0,hasDefault:!1,primaryKey:!1,isUnique:!1,uniqueName:void 0,uniqueType:void 0,dataType:t,columnType:n,generated:void 0}}$type(){return this}notNull(){return this.config.notNull=!0,this}default(e){return this.config.default=e,this.config.hasDefault=!0,this}$defaultFn(e){return this.config.defaultFn=e,this.config.hasDefault=!0,this}$default=this.$defaultFn;$onUpdateFn(e){return this.config.onUpdateFn=e,this.config.hasDefault=!0,this}$onUpdate=this.$onUpdateFn;primaryKey(){return this.config.primaryKey=!0,this.config.notNull=!0,this}setName(e){""===this.config.name&&(this.config.name=e)}}},73426:(e,t,n)=>{n.d(t,{V:()=>r});var i=n(73211);class r{constructor(e,t){this.table=e,this.config=t,this.name=t.name,this.keyAsName=t.keyAsName,this.notNull=t.notNull,this.default=t.default,this.defaultFn=t.defaultFn,this.onUpdateFn=t.onUpdateFn,this.hasDefault=t.hasDefault,this.primary=t.primaryKey,this.isUnique=t.isUnique,this.uniqueName=t.uniqueName,this.uniqueType=t.uniqueType,this.dataType=t.dataType,this.columnType=t.columnType,this.generated=t.generated,this.generatedIdentity=t.generatedIdentity}static [i.i]="Column";name;keyAsName;primary;notNull;default;defaultFn;onUpdateFn;hasDefault;isUnique;uniqueName;uniqueType;dataType;columnType;enumValues=void 0;generated=void 0;generatedIdentity=void 0;config;mapFromDriverValue(e){return e}mapToDriverValue(e){return e}shouldDisableInsert(){return void 0!==this.config.generated&&"byDefault"!==this.config.generated.type}}},73211:(e,t,n)=>{n.d(t,{i:()=>i,is:()=>r});let i=Symbol.for("drizzle:entityKind");function r(e,t){if(!e||"object"!=typeof e)return!1;if(e instanceof t)return!0;if(!Object.prototype.hasOwnProperty.call(t,i))throw Error(`Class "${t.name??"<unknown>"}" doesn't look like a Drizzle entity. If this is incorrect and the class is provided by Drizzle, please report this as a bug.`);let n=Object.getPrototypeOf(e).constructor;if(n)for(;n;){if(i in n&&n[i]===t[i])return!0;n=Object.getPrototypeOf(n)}return!1}Symbol.for("drizzle:hasOwnEntityKind")},75888:(e,t,n)=>{n.d(t,{iv:()=>b,pD:()=>y,DZ:()=>D,_k:()=>v,mm:()=>S,rl:()=>w,I$:()=>function e(t,n,i,o,l=e=>e){let a={};for(let[u,c]of o.entries())if(c.isJson){let r=n.relations[c.tsKey],o=i[u],m="string"==typeof o?JSON.parse(o):o;a[c.tsKey]=(0,s.is)(r,y)?m&&e(t,t[c.relationTableTsKey],m,c.selection,l):m.map(n=>e(t,t[c.relationTableTsKey],n,c.selection,l))}else{let e;let t=l(i[u]),n=c.field;e=(0,s.is)(n,r.V)?n:(0,s.is)(n,f.Xs)?n.decoder:n.sql.decoder,a[c.tsKey]=null===t?null:e.mapFromDriverValue(t)}return a},W0:()=>T,K1:()=>N});var i=n(94414),r=n(73426),s=n(73211);let o=Symbol.for("drizzle:PgInlineForeignKeys"),l=Symbol.for("drizzle:EnableRLS");class a extends i.XI{static [s.i]="PgTable";static Symbol=Object.assign({},i.XI.Symbol,{InlineForeignKeys:o,EnableRLS:l});[o]=[];[l]=!1;[i.XI.Symbol.ExtraConfigBuilder]=void 0}class u{static [s.i]="PgPrimaryKeyBuilder";columns;name;constructor(e,t){this.columns=e,this.name=t}build(e){return new c(e,this.columns,this.name)}}class c{constructor(e,t,n){this.table=e,this.columns=t,this.name=n}static [s.i]="PgPrimaryKey";columns;name;getName(){return this.name??`${this.table[a.Symbol.Name]}_${this.columns.map(e=>e.name).join("_")}_pk`}}var m=n(68919),f=n(18884);function d(e){return(0,f.ll)`${e} asc`}function h(e){return(0,f.ll)`${e} desc`}class p{constructor(e,t,n){this.sourceTable=e,this.referencedTable=t,this.relationName=n,this.referencedTableName=t[i.XI.Symbol.Name]}static [s.i]="Relation";referencedTableName;fieldName}class g{constructor(e,t){this.table=e,this.config=t}static [s.i]="Relations"}class y extends p{constructor(e,t,n,i){super(e,t,n?.relationName),this.config=n,this.isNullable=i}static [s.i]="One";withFieldName(e){let t=new y(this.sourceTable,this.referencedTable,this.config,this.isNullable);return t.fieldName=e,t}}class b extends p{constructor(e,t,n){super(e,t,n?.relationName),this.config=n}static [s.i]="Many";withFieldName(e){let t=new b(this.sourceTable,this.referencedTable,this.config);return t.fieldName=e,t}}function S(){return{and:m.Uo,between:m.Tq,eq:m.eq,exists:m.t2,gt:m.gt,gte:m.RO,ilike:m.B3,inArray:m.RV,isNull:m.kZ,isNotNull:m.Pe,like:m.mj,lt:m.lt,lte:m.wJ,ne:m.ne,not:m.AU,notBetween:m.o8,notExists:m.KJ,notLike:m.RK,notIlike:m.q1,notInArray:m.KL,or:m.or,sql:f.ll}}function w(){return{sql:f.ll,asc:d,desc:h}}function v(e,t){1===Object.keys(e).length&&"default"in e&&!(0,s.is)(e.default,i.XI)&&(e=e.default);let n={},r={},o={};for(let[l,a]of Object.entries(e))if((0,s.is)(a,i.XI)){let e=(0,i.Lf)(a),t=r[e];for(let r of(n[e]=l,o[l]={tsName:l,dbName:a[i.XI.Symbol.Name],schema:a[i.XI.Symbol.Schema],columns:a[i.XI.Symbol.Columns],relations:t?.relations??{},primaryKey:t?.primaryKey??[]},Object.values(a[i.XI.Symbol.Columns])))r.primary&&o[l].primaryKey.push(r);let c=a[i.XI.Symbol.ExtraConfigBuilder]?.(a[i.XI.Symbol.ExtraConfigColumns]);if(c)for(let e of Object.values(c))(0,s.is)(e,u)&&o[l].primaryKey.push(...e.columns)}else if((0,s.is)(a,g)){let e;let s=(0,i.Lf)(a.table),l=n[s];for(let[n,i]of Object.entries(a.config(t(a.table))))if(l){let t=o[l];t.relations[n]=i,e&&t.primaryKey.push(...e)}else s in r||(r[s]={relations:{},primaryKey:e}),r[s].relations[n]=i}return{tables:o,tableNamesMap:n}}function N(e,t){return new g(e,e=>Object.fromEntries(Object.entries(t(e)).map(([e,t])=>[e,t.withFieldName(e)])))}function T(e,t,n){if((0,s.is)(n,y)&&n.config)return{fields:n.config.fields,references:n.config.references};let r=t[(0,i.Lf)(n.referencedTable)];if(!r)throw Error(`Table "${n.referencedTable[i.XI.Symbol.Name]}" not found in schema`);let o=e[r];if(!o)throw Error(`Table "${r}" not found in schema`);let l=n.sourceTable,a=t[(0,i.Lf)(l)];if(!a)throw Error(`Table "${l[i.XI.Symbol.Name]}" not found in schema`);let u=[];for(let e of Object.values(o.relations))(n.relationName&&n!==e&&e.relationName===n.relationName||!n.relationName&&e.referencedTable===n.sourceTable)&&u.push(e);if(u.length>1)throw n.relationName?Error(`There are multiple relations with name "${n.relationName}" in table "${r}"`):Error(`There are multiple relations between "${r}" and "${n.sourceTable[i.XI.Symbol.Name]}". Please specify relation name`);if(u[0]&&(0,s.is)(u[0],y)&&u[0].config)return{fields:u[0].config.references,references:u[0].config.fields};throw Error(`There is not enough information to infer relation "${a}.${n.fieldName}"`)}function D(e){return{one:function(t,n){return new y(e,t,n,n?.fields.reduce((e,t)=>e&&t.notNull,!0)??!1)},many:function(t,n){return new b(e,t,n)}}}},68919:(e,t,n)=>{n.d(t,{AU:()=>f,B3:()=>C,KJ:()=>N,KL:()=>b,Pe:()=>w,RK:()=>Q,RO:()=>h,RV:()=>y,Tq:()=>T,Uo:()=>c,eq:()=>a,gt:()=>d,kZ:()=>S,lt:()=>p,mj:()=>L,ne:()=>u,o8:()=>D,or:()=>m,q1:()=>I,t2:()=>v,wJ:()=>g});var i=n(73426),r=n(73211),s=n(94414),o=n(18884);function l(e,t){return!(0,o.eG)(t)||(0,o.qt)(e)||(0,r.is)(e,o.Iw)||(0,r.is)(e,o.Or)||(0,r.is)(e,i.V)||(0,r.is)(e,s.XI)||(0,r.is)(e,o.Ss)?e:new o.Iw(e,t)}let a=(e,t)=>(0,o.ll)`${e} = ${l(t,e)}`,u=(e,t)=>(0,o.ll)`${e} <> ${l(t,e)}`;function c(...e){let t=e.filter(e=>void 0!==e);return 0===t.length?void 0:new o.Xs(1===t.length?t:[new o.DJ("("),o.ll.join(t,new o.DJ(" and ")),new o.DJ(")")])}function m(...e){let t=e.filter(e=>void 0!==e);return 0===t.length?void 0:new o.Xs(1===t.length?t:[new o.DJ("("),o.ll.join(t,new o.DJ(" or ")),new o.DJ(")")])}function f(e){return(0,o.ll)`not ${e}`}let d=(e,t)=>(0,o.ll)`${e} > ${l(t,e)}`,h=(e,t)=>(0,o.ll)`${e} >= ${l(t,e)}`,p=(e,t)=>(0,o.ll)`${e} < ${l(t,e)}`,g=(e,t)=>(0,o.ll)`${e} <= ${l(t,e)}`;function y(e,t){return Array.isArray(t)?0===t.length?(0,o.ll)`false`:(0,o.ll)`${e} in ${t.map(t=>l(t,e))}`:(0,o.ll)`${e} in ${l(t,e)}`}function b(e,t){return Array.isArray(t)?0===t.length?(0,o.ll)`true`:(0,o.ll)`${e} not in ${t.map(t=>l(t,e))}`:(0,o.ll)`${e} not in ${l(t,e)}`}function S(e){return(0,o.ll)`${e} is null`}function w(e){return(0,o.ll)`${e} is not null`}function v(e){return(0,o.ll)`exists ${e}`}function N(e){return(0,o.ll)`not exists ${e}`}function T(e,t,n){return(0,o.ll)`${e} between ${l(t,e)} and ${l(n,e)}`}function D(e,t,n){return(0,o.ll)`${e} not between ${l(t,e)} and ${l(n,e)}`}function L(e,t){return(0,o.ll)`${e} like ${t}`}function Q(e,t){return(0,o.ll)`${e} not like ${t}`}function C(e,t){return(0,o.ll)`${e} ilike ${t}`}function I(e,t){return(0,o.ll)`${e} not ilike ${t}`}},18884:(e,t,n)=>{let i,r;n.d(t,{Iw:()=>V,Or:()=>X,Xs:()=>z,DJ:()=>B,Ss:()=>U,Ct:()=>A,eG:()=>j,qt:()=>$,ll:()=>E});var s=n(73211),o=n(12860),l=n(73426),a=n(61369);class u{static [s.i]="PgForeignKeyBuilder";reference;_onUpdate="no action";_onDelete="no action";constructor(e,t){this.reference=()=>{let{name:t,columns:n,foreignColumns:i}=e();return{name:t,columns:n,foreignTable:i[0].table,foreignColumns:i}},t&&(this._onUpdate=t.onUpdate,this._onDelete=t.onDelete)}onUpdate(e){return this._onUpdate=void 0===e?"no action":e,this}onDelete(e){return this._onDelete=void 0===e?"no action":e,this}build(e){return new c(e,this)}}class c{constructor(e,t){this.table=e,this.reference=t.reference,this.onUpdate=t._onUpdate,this.onDelete=t._onDelete}static [s.i]="PgForeignKey";reference;onUpdate;onDelete;getName(){let{name:e,columns:t,foreignColumns:n}=this.reference(),i=t.map(e=>e.name),r=n.map(e=>e.name),s=[this.table[a.E],...i,n[0].table[a.E],...r];return e??`${s.join("_")}_fk`}}function m(e,...t){return e(...t)}function f(e,t){return`${e[a.E]}_${t.join("_")}_unique`}class d{constructor(e,t){this.name=t,this.columns=e}static [s.i]=null;columns;nullsNotDistinctConfig=!1;nullsNotDistinct(){return this.nullsNotDistinctConfig=!0,this}build(e){return new p(e,this.columns,this.nullsNotDistinctConfig,this.name)}}class h{static [s.i]=null;name;constructor(e){this.name=e}on(...e){return new d(e,this.name)}}class p{constructor(e,t,n,i){this.table=e,this.columns=t,this.name=i??f(this.table,this.columns.map(e=>e.name)),this.nullsNotDistinct=n}static [s.i]=null;columns;name;nullsNotDistinct=!1;getName(){return this.name}}function g(e,t,n){for(let i=t;i<e.length;i++){let r=e[i];if("\\"===r){i++;continue}if('"'===r)return[e.slice(t,i).replace(/\\/g,""),i+1];if(!n&&(","===r||"}"===r))return[e.slice(t,i).replace(/\\/g,""),i]}return[e.slice(t).replace(/\\/g,""),e.length]}class y extends o.Q{foreignKeyConfigs=[];static [s.i]="PgColumnBuilder";array(e){return new v(this.config.name,this,e)}references(e,t={}){return this.foreignKeyConfigs.push({ref:e,actions:t}),this}unique(e,t){return this.config.isUnique=!0,this.config.uniqueName=e,this.config.uniqueType=t?.nulls,this}generatedAlwaysAs(e){return this.config.generated={as:e,type:"always",mode:"stored"},this}buildForeignKeys(e,t){return this.foreignKeyConfigs.map(({ref:n,actions:i})=>m((n,i)=>{let r=new u(()=>({columns:[e],foreignColumns:[n()]}));return i.onUpdate&&r.onUpdate(i.onUpdate),i.onDelete&&r.onDelete(i.onDelete),r.build(t)},n,i))}buildExtraConfigColumn(e){return new S(e,this.config)}}class b extends l.V{constructor(e,t){t.uniqueName||(t.uniqueName=f(e,[t.name])),super(e,t),this.table=e}static [s.i]="PgColumn"}class S extends b{static [s.i]="ExtraConfigColumn";getSQLType(){return this.getSQLType()}indexConfig={order:this.config.order??"asc",nulls:this.config.nulls??"last",opClass:this.config.opClass};defaultConfig={order:"asc",nulls:"last",opClass:void 0};asc(){return this.indexConfig.order="asc",this}desc(){return this.indexConfig.order="desc",this}nullsFirst(){return this.indexConfig.nulls="first",this}nullsLast(){return this.indexConfig.nulls="last",this}op(e){return this.indexConfig.opClass=e,this}}class w{static [s.i]=null;constructor(e,t,n,i){this.name=e,this.keyAsName=t,this.type=n,this.indexConfig=i}name;keyAsName;type;indexConfig}class v extends y{static [s.i]="PgArrayBuilder";constructor(e,t,n){super(e,"array","PgArray"),this.config.baseBuilder=t,this.config.size=n}build(e){let t=this.config.baseBuilder.build(e);return new N(e,this.config,t)}}class N extends b{constructor(e,t,n,i){super(e,t),this.baseColumn=n,this.range=i,this.size=t.size}size;static [s.i]="PgArray";getSQLType(){return`${this.baseColumn.getSQLType()}[${"number"==typeof this.size?this.size:""}]`}mapFromDriverValue(e){return"string"==typeof e&&(e=function(e){let[t]=function e(t,n=0){let i=[],r=n,s=!1;for(;r<t.length;){let o=t[r];if(","===o){(s||r===n)&&i.push(""),s=!0,r++;continue}if(s=!1,"\\"===o){r+=2;continue}if('"'===o){let[e,n]=g(t,r+1,!0);i.push(e),r=n;continue}if("}"===o)return[i,r+1];if("{"===o){let[n,s]=e(t,r+1);i.push(n),r=s;continue}let[l,a]=g(t,r,!1);i.push(l),r=a}return[i,r]}(e,1);return t}(e)),e.map(e=>this.baseColumn.mapFromDriverValue(e))}mapToDriverValue(e,t=!1){let n=e.map(e=>null===e?null:(0,s.is)(this.baseColumn,N)?this.baseColumn.mapToDriverValue(e,!0):this.baseColumn.mapToDriverValue(e));return t?n:function e(t){return`{${t.map(t=>Array.isArray(t)?e(t):"string"==typeof t?`"${t.replace(/\\/g,"\\\\").replace(/"/g,'\\"')}"`:`${t}`).join(",")}}`}(n)}}let T=Symbol.for("drizzle:isPgEnum");class D extends y{static [s.i]="PgEnumColumnBuilder";constructor(e,t){super(e,"string","PgEnumColumn"),this.config.enum=t}build(e){return new L(e,this.config)}}class L extends b{static [s.i]="PgEnumColumn";enum=this.config.enum;enumValues=this.config.enum.enumValues;constructor(e,t){super(e,t),this.enum=t.enum}getSQLType(){return this.enum.enumName}}var Q=n(214);let C={startActiveSpan:(e,t)=>i?(r||(r=i.trace.getTracer("drizzle-orm","0.38.4")),m((n,i)=>i.startActiveSpan(e,e=>{try{return t(e)}catch(t){throw e.setStatus({code:n.SpanStatusCode.ERROR,message:t instanceof Error?t.message:"Unknown error"}),t}finally{e.end()}}),i,r)):t()};var I=n(75351),x=n(94414);class q{static [s.i]=null}function $(e){return null!=e&&"function"==typeof e.getSQL}class B{static [s.i]="StringChunk";value;constructor(e){this.value=Array.isArray(e)?e:[e]}getSQL(){return new z([this])}}class z{constructor(e){this.queryChunks=e}static [s.i]="SQL";decoder=F;shouldInlineParams=!1;append(e){return this.queryChunks.push(...e.queryChunks),this}toQuery(e){return C.startActiveSpan("drizzle.buildSQL",t=>{let n=this.buildQueryFromSourceParams(this.queryChunks,e);return t?.setAttributes({"drizzle.query.text":n.sql,"drizzle.query.params":JSON.stringify(n.params)}),n})}buildQueryFromSourceParams(e,t){let n=Object.assign({},t,{inlineParams:t.inlineParams||this.shouldInlineParams,paramStartIndex:t.paramStartIndex||{value:0}}),{casing:i,escapeName:r,escapeParam:o,prepareTyping:a,inlineParams:u,paramStartIndex:c}=n;return function(e){let t={sql:"",params:[]};for(let n of e)t.sql+=n.sql,t.params.push(...n.params),n.typings?.length&&(t.typings||(t.typings=[]),t.typings.push(...n.typings));return t}(e.map(e=>{if((0,s.is)(e,B))return{sql:e.value.join(""),params:[]};if((0,s.is)(e,P))return{sql:r(e.value),params:[]};if(void 0===e)return{sql:"",params:[]};if(Array.isArray(e)){let t=[new B("(")];for(let[n,i]of e.entries())t.push(i),n<e.length-1&&t.push(new B(", "));return t.push(new B(")")),this.buildQueryFromSourceParams(t,n)}if((0,s.is)(e,z))return this.buildQueryFromSourceParams(e.queryChunks,{...n,inlineParams:u||e.shouldInlineParams});if((0,s.is)(e,x.XI)){let t=e[x.XI.Symbol.Schema],n=e[x.XI.Symbol.Name];return{sql:void 0===t?r(n):r(t)+"."+r(n),params:[]}}if((0,s.is)(e,l.V)){let n=i.getColumnCasing(e);if("indexes"===t.invokeSource)return{sql:r(n),params:[]};let s=e.table[x.XI.Symbol.Schema];return{sql:e.table[x.HE]||void 0===s?r(e.table[x.XI.Symbol.Name])+"."+r(n):r(s)+"."+r(e.table[x.XI.Symbol.Name])+"."+r(n),params:[]}}if((0,s.is)(e,U)){let t=e[I.n].schema,n=e[I.n].name;return{sql:void 0===t?r(n):r(t)+"."+r(n),params:[]}}if((0,s.is)(e,V)){if((0,s.is)(e.value,X))return{sql:o(c.value++,e),params:[e],typings:["none"]};let t=null===e.value?null:e.encoder.mapToDriverValue(e.value);if((0,s.is)(t,z))return this.buildQueryFromSourceParams([t],n);if(u)return{sql:this.mapInlineParam(t,n),params:[]};let i=["none"];return a&&(i=[a(e.encoder)]),{sql:o(c.value++,t),params:[t],typings:i}}return(0,s.is)(e,X)?{sql:o(c.value++,e),params:[e],typings:["none"]}:(0,s.is)(e,z.Aliased)&&void 0!==e.fieldAlias?{sql:r(e.fieldAlias),params:[]}:(0,s.is)(e,Q.n)?e._.isWith?{sql:r(e._.alias),params:[]}:this.buildQueryFromSourceParams([new B("("),e._.sql,new B(") "),new P(e._.alias)],n):e&&"function"==typeof e&&T in e&&!0===e[T]?e.schema?{sql:r(e.schema)+"."+r(e.enumName),params:[]}:{sql:r(e.enumName),params:[]}:$(e)?e.shouldOmitSQLParens?.()?this.buildQueryFromSourceParams([e.getSQL()],n):this.buildQueryFromSourceParams([new B("("),e.getSQL(),new B(")")],n):u?{sql:this.mapInlineParam(e,n),params:[]}:{sql:o(c.value++,e),params:[e],typings:["none"]}}))}mapInlineParam(e,{escapeString:t}){if(null===e)return"null";if("number"==typeof e||"boolean"==typeof e)return e.toString();if("string"==typeof e)return t(e);if("object"==typeof e){let n=e.toString();return"[object Object]"===n?t(JSON.stringify(e)):t(n)}throw Error("Unexpected param value: "+e)}getSQL(){return this}as(e){return void 0===e?this:new z.Aliased(this,e)}mapWith(e){return this.decoder="function"==typeof e?{mapFromDriverValue:e}:e,this}inlineParams(){return this.shouldInlineParams=!0,this}if(e){return e?this:void 0}}class P{constructor(e){this.value=e}static [s.i]="Name";brand;getSQL(){return new z([this])}}function j(e){return"object"==typeof e&&null!==e&&"mapToDriverValue"in e&&"function"==typeof e.mapToDriverValue}let F={mapFromDriverValue:e=>e},O={mapToDriverValue:e=>e};({...F,...O});class V{constructor(e,t=O){this.value=e,this.encoder=t}static [s.i]="Param";brand;getSQL(){return new z([this])}}function E(e,...t){let n=[];for(let[i,r]of((t.length>0||e.length>0&&""!==e[0])&&n.push(new B(e[0])),t.entries()))n.push(r,new B(e[i+1]));return new z(n)}(e=>{e.empty=function(){return new z([])},e.fromList=function(e){return new z(e)},e.raw=function(e){return new z([new B(e)])},e.join=function(e,t){let n=[];for(let[i,r]of e.entries())i>0&&void 0!==t&&n.push(t),n.push(r);return new z(n)},e.identifier=function(e){return new P(e)},e.placeholder=function(e){return new X(e)},e.param=function(e,t){return new V(e,t)}})(E||(E={})),(e=>{class t{constructor(e,t){this.sql=e,this.fieldAlias=t}static [s.i]="SQL.Aliased";isSelectionField=!1;getSQL(){return this.sql}clone(){return new t(this.sql,this.fieldAlias)}}e.Aliased=t})(z||(z={}));class X{constructor(e){this.name=e}static [s.i]="Placeholder";getSQL(){return new z([this])}}function A(e,t){return e.map(e=>{if((0,s.is)(e,X)){if(!(e.name in t))throw Error(`No value for placeholder "${e.name}" was provided`);return t[e.name]}if((0,s.is)(e,V)&&(0,s.is)(e.value,X)){if(!(e.value.name in t))throw Error(`No value for placeholder "${e.value.name}" was provided`);return e.encoder.mapToDriverValue(t[e.value.name])}return e})}let K=Symbol.for("drizzle:IsDrizzleView");class U{static [s.i]="View";[I.n];[K]=!0;constructor({name:e,schema:t,selectedFields:n,query:i}){this[I.n]={name:e,originalName:e,schema:t,selectedFields:n,query:i,isExisting:!i,isAlias:!1}}getSQL(){return new z([this])}}l.V.prototype.getSQL=function(){return new z([this])},x.XI.prototype.getSQL=function(){return new z([this])},Q.n.prototype.getSQL=function(){return new z([this])}},94314:(e,t,n)=>{n.d(t,{v:()=>h,o:()=>d});var i=n(12860),r=n(73426),s=n(73211),o=n(61369);class l{static [s.i]="SQLiteForeignKeyBuilder";reference;_onUpdate;_onDelete;constructor(e,t){this.reference=()=>{let{name:t,columns:n,foreignColumns:i}=e();return{name:t,columns:n,foreignTable:i[0].table,foreignColumns:i}},t&&(this._onUpdate=t.onUpdate,this._onDelete=t.onDelete)}onUpdate(e){return this._onUpdate=e,this}onDelete(e){return this._onDelete=e,this}build(e){return new a(e,this)}}class a{constructor(e,t){this.table=e,this.reference=t.reference,this.onUpdate=t._onUpdate,this.onDelete=t._onDelete}static [s.i]="SQLiteForeignKey";reference;onUpdate;onDelete;getName(){let{name:e,columns:t,foreignColumns:n}=this.reference(),i=t.map(e=>e.name),r=n.map(e=>e.name),s=[this.table[o.E],...i,n[0].table[o.E],...r];return e??`${s.join("_")}_fk`}}function u(e,t){return`${e[o.E]}_${t.join("_")}_unique`}class c{constructor(e,t){this.name=t,this.columns=e}static [s.i]=null;columns;build(e){return new f(e,this.columns,this.name)}}class m{static [s.i]=null;name;constructor(e){this.name=e}on(...e){return new c(e,this.name)}}class f{constructor(e,t,n){this.table=e,this.columns=t,this.name=n??u(this.table,this.columns.map(e=>e.name))}static [s.i]=null;columns;name;getName(){return this.name}}class d extends i.Q{static [s.i]="SQLiteColumnBuilder";foreignKeyConfigs=[];references(e,t={}){return this.foreignKeyConfigs.push({ref:e,actions:t}),this}unique(e){return this.config.isUnique=!0,this.config.uniqueName=e,this}generatedAlwaysAs(e,t){return this.config.generated={as:e,type:"always",mode:t?.mode??"virtual"},this}buildForeignKeys(e,t){return this.foreignKeyConfigs.map(({ref:n,actions:i})=>((n,i)=>{let r=new l(()=>({columns:[e],foreignColumns:[n()]}));return i.onUpdate&&r.onUpdate(i.onUpdate),i.onDelete&&r.onDelete(i.onDelete),r.build(t)})(n,i))}}class h extends r.V{constructor(e,t){t.uniqueName||(t.uniqueName=u(e,[t.name])),super(e,t),this.table=e}static [s.i]="SQLiteColumn"}},42787:(e,t,n)=>{n.d(t,{nd:()=>p});var i=n(73211),r=n(18884),s=n(44091),o=n(94314);class l extends o.o{static [i.i]="SQLiteBaseIntegerBuilder";constructor(e,t,n){super(e,t,n),this.config.autoIncrement=!1}primaryKey(e){return e?.autoIncrement&&(this.config.autoIncrement=!0),this.config.hasDefault=!0,super.primaryKey()}}class a extends o.v{static [i.i]="SQLiteBaseInteger";autoIncrement=this.config.autoIncrement;getSQLType(){return"integer"}}class u extends l{static [i.i]="SQLiteIntegerBuilder";constructor(e){super(e,"number","SQLiteInteger")}build(e){return new c(e,this.config)}}class c extends a{static [i.i]="SQLiteInteger"}class m extends l{static [i.i]="SQLiteTimestampBuilder";constructor(e,t){super(e,"date","SQLiteTimestamp"),this.config.mode=t}defaultNow(){return this.default((0,r.ll)`(cast((julianday('now') - 2440587.5)*86400000 as integer))`)}build(e){return new f(e,this.config)}}class f extends a{static [i.i]="SQLiteTimestamp";mode=this.config.mode;mapFromDriverValue(e){return new Date("timestamp"===this.config.mode?1e3*e:e)}mapToDriverValue(e){let t=e.getTime();return"timestamp"===this.config.mode?Math.floor(t/1e3):t}}class d extends l{static [i.i]="SQLiteBooleanBuilder";constructor(e,t){super(e,"boolean","SQLiteBoolean"),this.config.mode=t}build(e){return new h(e,this.config)}}class h extends a{static [i.i]="SQLiteBoolean";mode=this.config.mode;mapFromDriverValue(e){return 1===Number(e)}mapToDriverValue(e){return e?1:0}}function p(e,t){let{name:n,config:i}=(0,s.Ll)(e,t);return i?.mode==="timestamp"||i?.mode==="timestamp_ms"?new m(n,i.mode):i?.mode==="boolean"?new d(n,i.mode):new u(n)}},5737:(e,t,n)=>{n.d(t,{x:()=>l});var i=n(73211),r=n(94314);class s extends r.o{static [i.i]="SQLiteRealBuilder";constructor(e){super(e,"number","SQLiteReal")}build(e){return new o(e,this.config)}}class o extends r.v{static [i.i]="SQLiteReal";getSQLType(){return"real"}}function l(e){return new s(e??"")}},18762:(e,t,n)=>{n.d(t,{Qq:()=>c});var i=n(73211),r=n(44091),s=n(94314);class o extends s.o{static [i.i]="SQLiteTextBuilder";constructor(e,t){super(e,"string","SQLiteText"),this.config.enumValues=t.enum,this.config.length=t.length}build(e){return new l(e,this.config)}}class l extends s.v{static [i.i]="SQLiteText";enumValues=this.config.enumValues;length=this.config.length;constructor(e,t){super(e,t)}getSQLType(){return`text${this.config.length?`(${this.config.length})`:""}`}}class a extends s.o{static [i.i]="SQLiteTextJsonBuilder";constructor(e){super(e,"json","SQLiteTextJson")}build(e){return new u(e,this.config)}}class u extends s.v{static [i.i]="SQLiteTextJson";getSQLType(){return"text"}mapFromDriverValue(e){return JSON.parse(e)}mapToDriverValue(e){return JSON.stringify(e)}}function c(e,t={}){let{name:n,config:i}=(0,r.Ll)(e,t);return"json"===i.mode?new a(n):new o(n,i)}},16620:(e,t,n)=>{n.d(t,{jo:()=>D,D:()=>L});var i=n(73211),r=n(94414),s=n(44091),o=n(94314);class l extends o.o{static [i.i]="SQLiteBigIntBuilder";constructor(e){super(e,"bigint","SQLiteBigInt")}build(e){return new a(e,this.config)}}class a extends o.v{static [i.i]="SQLiteBigInt";getSQLType(){return"blob"}mapFromDriverValue(e){return Buffer.isBuffer(e)?BigInt(e.toString()):e instanceof ArrayBuffer?BigInt(new TextDecoder().decode(e)):BigInt(String.fromCodePoint(...e))}mapToDriverValue(e){return Buffer.from(e.toString())}}class u extends o.o{static [i.i]="SQLiteBlobJsonBuilder";constructor(e){super(e,"json","SQLiteBlobJson")}build(e){return new c(e,this.config)}}class c extends o.v{static [i.i]="SQLiteBlobJson";getSQLType(){return"blob"}mapFromDriverValue(e){return Buffer.isBuffer(e)?JSON.parse(e.toString()):e instanceof ArrayBuffer?JSON.parse(new TextDecoder().decode(e)):JSON.parse(String.fromCodePoint(...e))}mapToDriverValue(e){return Buffer.from(JSON.stringify(e))}}class m extends o.o{static [i.i]="SQLiteBlobBufferBuilder";constructor(e){super(e,"buffer","SQLiteBlobBuffer")}build(e){return new f(e,this.config)}}class f extends o.v{static [i.i]="SQLiteBlobBuffer";getSQLType(){return"blob"}}function d(e,t){let{name:n,config:i}=(0,s.Ll)(e,t);return i?.mode==="json"?new u(n):i?.mode==="bigint"?new l(n):new m(n)}class h extends o.o{static [i.i]="SQLiteCustomColumnBuilder";constructor(e,t,n){super(e,"custom","SQLiteCustomColumn"),this.config.fieldConfig=t,this.config.customTypeParams=n}build(e){return new p(e,this.config)}}class p extends o.v{static [i.i]="SQLiteCustomColumn";sqlName;mapTo;mapFrom;constructor(e,t){super(e,t),this.sqlName=t.customTypeParams.dataType(t.fieldConfig),this.mapTo=t.customTypeParams.toDriver,this.mapFrom=t.customTypeParams.fromDriver}getSQLType(){return this.sqlName}mapFromDriverValue(e){return"function"==typeof this.mapFrom?this.mapFrom(e):e}mapToDriverValue(e){return"function"==typeof this.mapTo?this.mapTo(e):e}}function g(e){return(t,n)=>{let{name:i,config:r}=(0,s.Ll)(t,n);return new h(i,r,e)}}var y=n(42787);class b extends o.o{static [i.i]="SQLiteNumericBuilder";constructor(e){super(e,"string","SQLiteNumeric")}build(e){return new S(e,this.config)}}class S extends o.v{static [i.i]="SQLiteNumeric";getSQLType(){return"numeric"}}function w(e){return new b(e??"")}var v=n(5737),N=n(18762);let T=Symbol.for("drizzle:SQLiteInlineForeignKeys");class D extends r.XI{static [i.i]="SQLiteTable";static Symbol=Object.assign({},r.XI.Symbol,{InlineForeignKeys:T});[r.XI.Symbol.Columns];[T]=[];[r.XI.Symbol.ExtraConfigBuilder]=void 0}let L=(e,t,n)=>(function(e,t,n,i,s=e){let o=new D(e,void 0,s),l=Object.fromEntries(Object.entries("function"==typeof t?t({blob:d,customType:g,integer:y.nd,numeric:w,real:v.x,text:N.Qq}):t).map(([e,t])=>{t.setName(e);let n=t.build(o);return o[T].push(...t.buildForeignKeys(n,o)),[e,n]})),a=Object.assign(o,l);return a[r.XI.Symbol.Columns]=l,a[r.XI.Symbol.ExtraConfigColumns]=l,n&&(a[D.Symbol.ExtraConfigBuilder]=n),a})(e,t,n)},214:(e,t,n)=>{n.d(t,{J:()=>s,n:()=>r});var i=n(73211);class r{static [i.i]="Subquery";constructor(e,t,n,i=!1){this._={brand:"Subquery",sql:e,selectedFields:t,alias:n,isWith:i}}}class s extends r{static [i.i]="WithSubquery"}},94414:(e,t,n)=>{n.d(t,{HE:()=>c,Io:()=>h,Lf:()=>p,XI:()=>d,e:()=>o});var i=n(73211),r=n(61369);let s=Symbol.for("drizzle:Schema"),o=Symbol.for("drizzle:Columns"),l=Symbol.for("drizzle:ExtraConfigColumns"),a=Symbol.for("drizzle:OriginalName"),u=Symbol.for("drizzle:BaseName"),c=Symbol.for("drizzle:IsAlias"),m=Symbol.for("drizzle:ExtraConfigBuilder"),f=Symbol.for("drizzle:IsDrizzleTable");class d{static [i.i]="Table";static Symbol={Name:r.E,Schema:s,OriginalName:a,Columns:o,ExtraConfigColumns:l,BaseName:u,IsAlias:c,ExtraConfigBuilder:m};[r.E];[a];[s];[o];[l];[u];[c]=!1;[f]=!0;[m]=void 0;constructor(e,t,n){this[r.E]=this[a]=e,this[s]=t,this[u]=n}}function h(e){return e[r.E]}function p(e){return`${e[s]??"public"}.${e[r.E]}`}},61369:(e,t,n)=>{n.d(t,{E:()=>i});let i=Symbol.for("drizzle:Name")},44091:(e,t,n)=>{n.d(t,{DV:()=>c,He:()=>function e(t,n){return Object.entries(t).reduce((t,[o,a])=>{if("string"!=typeof o)return t;let u=n?[...n,o]:[o];return(0,r.is)(a,i.V)||(0,r.is)(a,s.Xs)||(0,r.is)(a,s.Xs.Aliased)?t.push({path:u,field:a}):(0,r.is)(a,l.XI)?t.push(...e(a[l.XI.Symbol.Columns],u)):t.push(...e(a,u)),t},[])},Ll:()=>p,XJ:()=>f,YD:()=>d,a6:()=>u,q:()=>m,zN:()=>h});var i=n(73426),r=n(73211),s=n(18884),o=n(214),l=n(94414),a=n(75351);function u(e,t,n){let o={},a=e.reduce((e,{path:a,field:u},c)=>{let m;m=(0,r.is)(u,i.V)?u:(0,r.is)(u,s.Xs)?u.decoder:u.sql.decoder;let f=e;for(let[e,s]of a.entries())if(e<a.length-1)s in f||(f[s]={}),f=f[s];else{let e=t[c],d=f[s]=null===e?null:m.mapFromDriverValue(e);if(n&&(0,r.is)(u,i.V)&&2===a.length){let e=a[0];e in o?"string"==typeof o[e]&&o[e]!==(0,l.Io)(u.table)&&(o[e]=!1):o[e]=null===d&&(0,l.Io)(u.table)}}return e},{});if(n&&Object.keys(o).length>0)for(let[e,t]of Object.entries(o))"string"!=typeof t||n[t]||(a[e]=null);return a}function c(e,t){let n=Object.keys(e),i=Object.keys(t);if(n.length!==i.length)return!1;for(let[e,t]of n.entries())if(t!==i[e])return!1;return!0}function m(e,t){let n=Object.entries(t).filter(([,e])=>void 0!==e).map(([t,n])=>(0,r.is)(n,s.Xs)||(0,r.is)(n,i.V)?[t,n]:[t,new s.Iw(n,e[l.XI.Symbol.Columns][t])]);if(0===n.length)throw Error("No values to set");return Object.fromEntries(n)}function f(e,t){for(let n of t)for(let t of Object.getOwnPropertyNames(n.prototype))"constructor"!==t&&Object.defineProperty(e.prototype,t,Object.getOwnPropertyDescriptor(n.prototype,t)||Object.create(null))}function d(e){return e[l.XI.Symbol.Columns]}function h(e){return(0,r.is)(e,o.n)?e._.alias:(0,r.is)(e,s.Ss)?e[a.n].name:(0,r.is)(e,s.Xs)?void 0:e[l.XI.Symbol.IsAlias]?e[l.XI.Symbol.Name]:e[l.XI.Symbol.BaseName]}function p(e,t){return{name:"string"==typeof e&&e.length>0?e:"",config:"object"==typeof e?e:t}}},75351:(e,t,n)=>{n.d(t,{n:()=>i});let i=Symbol.for("drizzle:ViewBaseConfig")}};