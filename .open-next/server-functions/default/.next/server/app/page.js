(()=>{var e={};e.id=974,e.ids=[974],e.modules={10846:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},19121:e=>{"use strict";e.exports=require("next/dist/server/app-render/action-async-storage.external.js")},3295:e=>{"use strict";e.exports=require("next/dist/server/app-render/after-task-async-storage.external.js")},29294:e=>{"use strict";e.exports=require("next/dist/server/app-render/work-async-storage.external.js")},63033:e=>{"use strict";e.exports=require("next/dist/server/app-render/work-unit-async-storage.external.js")},33873:e=>{"use strict";e.exports=require("path")},62800:(e,s,t)=>{"use strict";t.r(s),t.d(s,{GlobalError:()=>i.a,__next_app__:()=>x,pages:()=>c,routeModule:()=>m,tree:()=>o});var r=t(75706),a=t(91133),n=t(69877),i=t.n(n),l=t(79114),d={};for(let e in l)0>["default","tree","pages","GlobalError","__next_app__","routeModule"].indexOf(e)&&(d[e]=()=>l[e]);t.d(s,d);let o=["",{children:["__PAGE__",{},{page:[()=>Promise.resolve().then(t.bind(t,17385)),"/Users/kawashimariku/Desktop/KPI管理/src/app/page.tsx"]}]},{layout:[()=>Promise.resolve().then(t.bind(t,21234)),"/Users/kawashimariku/Desktop/KPI管理/src/app/layout.tsx"],"not-found":[()=>Promise.resolve().then(t.t.bind(t,89867,23)),"next/dist/client/components/not-found-error"],forbidden:[()=>Promise.resolve().then(t.t.bind(t,25990,23)),"next/dist/client/components/forbidden-error"],unauthorized:[()=>Promise.resolve().then(t.t.bind(t,51679,23)),"next/dist/client/components/unauthorized-error"]}],c=["/Users/kawashimariku/Desktop/KPI管理/src/app/page.tsx"],x={require:t,loadChunk:()=>Promise.resolve()},m=new r.AppPageRouteModule({definition:{kind:a.RouteKind.APP_PAGE,page:"/page",pathname:"/",bundlePath:"",filename:"",appPaths:[]},userland:{loaderTree:o}})},53825:(e,s,t)=>{Promise.resolve().then(t.t.bind(t,44365,23)),Promise.resolve().then(t.t.bind(t,5309,23)),Promise.resolve().then(t.t.bind(t,69877,23)),Promise.resolve().then(t.t.bind(t,21300,23)),Promise.resolve().then(t.t.bind(t,5612,23)),Promise.resolve().then(t.t.bind(t,63368,23)),Promise.resolve().then(t.t.bind(t,25775,23))},90273:(e,s,t)=>{Promise.resolve().then(t.t.bind(t,37113,23)),Promise.resolve().then(t.t.bind(t,54689,23)),Promise.resolve().then(t.t.bind(t,87401,23)),Promise.resolve().then(t.t.bind(t,19704,23)),Promise.resolve().then(t.t.bind(t,1320,23)),Promise.resolve().then(t.t.bind(t,50172,23)),Promise.resolve().then(t.t.bind(t,6491,23))},12409:()=>{},25561:()=>{},80142:(e,s,t)=>{Promise.resolve().then(t.bind(t,17385))},43190:(e,s,t)=>{Promise.resolve().then(t.bind(t,64697))},85879:(e,s,t)=>{"use strict";t.d(s,{A:()=>r});let r=(0,t(6974).A)("ArrowDown",[["path",{d:"M12 5v14",key:"s699le"}],["path",{d:"m19 12-7 7-7-7",key:"1idqje"}]])},94474:(e,s,t)=>{"use strict";t.d(s,{A:()=>r});let r=(0,t(6974).A)("ArrowUp",[["path",{d:"m5 12 7-7 7 7",key:"hav0vg"}],["path",{d:"M12 19V5",key:"x0mq9r"}]])},44703:(e,s,t)=>{"use strict";t.d(s,{A:()=>r});let r=(0,t(6974).A)("Plus",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]])},64697:(e,s,t)=>{"use strict";t.r(s),t.d(s,{default:()=>b});var r=t(78918),a=t(83943),n=t(36518),i=t(93174),l=t(87079),d=t(60349),o=t.n(d),c=t(6974);let x=(0,c.A)("Calendar",[["path",{d:"M8 2v4",key:"1cmpym"}],["path",{d:"M16 2v4",key:"4m81vk"}],["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",key:"1hopcy"}],["path",{d:"M3 10h18",key:"8toen8"}]]);function m({goal:e,progress:s,kpis:t,daysRemaining:a}){return(0,r.jsxs)(i.Zp,{children:[(0,r.jsx)(i.aR,{children:(0,r.jsxs)("div",{className:"flex items-start justify-between",children:[(0,r.jsxs)("div",{className:"flex-1",children:[(0,r.jsx)(i.ZB,{className:"text-xl",children:e.title}),(0,r.jsxs)("div",{className:"mt-2 flex items-center space-x-4 text-sm text-muted-foreground",children:[null!==a&&(0,r.jsxs)("div",{className:"flex items-center space-x-1",children:[(0,r.jsx)(x,{className:"h-4 w-4"}),(0,r.jsxs)("span",{children:["残り",a,"日"]})]}),(0,r.jsxs)("div",{children:["目標: ",e.targetValue,e.unit]})]})]}),(0,r.jsx)("div",{className:"text-center",children:(0,r.jsxs)("div",{className:"relative h-20 w-20",children:[(0,r.jsxs)("svg",{className:"h-20 w-20 -rotate-90 transform",children:[(0,r.jsx)("circle",{cx:"40",cy:"40",r:"32",stroke:"currentColor",strokeWidth:"6",fill:"transparent",className:"text-gray-200"}),(0,r.jsx)("circle",{cx:"40",cy:"40",r:"32",stroke:"currentColor",strokeWidth:"6",fill:"transparent",strokeDasharray:`${2*Math.PI*32}`,strokeDashoffset:`${2*Math.PI*32*(1-s/100)}`,className:"text-primary transition-all duration-300"})]}),(0,r.jsx)("div",{className:"absolute inset-0 flex items-center justify-center",children:(0,r.jsxs)("span",{className:"text-lg font-bold",children:[s,"%"]})})]})})]})}),(0,r.jsx)(i.Wu,{children:(0,r.jsxs)("div",{className:"space-y-2",children:[(0,r.jsx)("div",{className:"text-sm font-medium",children:"KPI一覧"}),0===t.length?(0,r.jsx)("p",{className:"text-sm text-muted-foreground",children:"KPIが設定されていません"}):(0,r.jsx)("div",{className:"space-y-1",children:t.map(({kpi:e,overdue:s})=>(0,r.jsxs)(o(),{href:`/kpi/${e.id}`,className:"flex items-center justify-between rounded-md border p-2 text-sm hover:bg-accent",children:[(0,r.jsx)("span",{children:e.title}),s&&(0,r.jsx)(l.E,{variant:"destructive",className:"text-xs",children:"未更新"})]},e.id))})]})})]})}var u=t(41746),h=t(30352),p=t(94474),f=t(85879);let v=(0,c.A)("CircleAlert",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]]);function j({kpi:e,currentValue:s,ratio:t,lastUpdate:n,overdue:d,onUpdate:o}){let[c,x]=(0,a.useState)(""),[m,j]=(0,a.useState)(""),[g,b]=(0,a.useState)(!1),y=async e=>{if(e.preventDefault(),c){b(!0);try{await o(Number(c),m),x(""),j("")}finally{b(!1)}}},N={daily:"日次",weekly:"週次",monthly:"月次"}[e.frequency];return(0,r.jsxs)(i.Zp,{className:d?"border-destructive":"",children:[(0,r.jsx)(i.aR,{className:"pb-3",children:(0,r.jsxs)("div",{className:"flex items-start justify-between",children:[(0,r.jsxs)("div",{className:"flex-1",children:[(0,r.jsx)(i.ZB,{className:"text-lg",children:e.title}),(0,r.jsxs)("div",{className:"mt-1 flex items-center space-x-2 text-sm text-muted-foreground",children:[(0,r.jsx)("span",{children:N}),(0,r.jsx)("span",{children:"\xb7"}),"up"===e.direction?(0,r.jsx)(p.A,{className:"h-3 w-3 text-green-600"}):(0,r.jsx)(f.A,{className:"h-3 w-3 text-blue-600"}),(0,r.jsxs)("span",{children:["目標: ",e.targetValue,e.unit]})]})]}),d&&(0,r.jsxs)(l.E,{variant:"destructive",children:[(0,r.jsx)(v,{className:"mr-1 h-3 w-3"}),"未更新"]})]})}),(0,r.jsx)(i.Wu,{children:(0,r.jsxs)("div",{className:"space-y-3",children:[(0,r.jsxs)("div",{className:"flex items-baseline justify-between",children:[(0,r.jsxs)("div",{children:[(0,r.jsxs)("div",{className:"text-3xl font-bold",children:[s,(0,r.jsx)("span",{className:"ml-1 text-lg font-normal text-muted-foreground",children:e.unit})]}),(0,r.jsxs)("div",{className:"mt-1 text-sm text-muted-foreground",children:["達成率: ",Math.round(100*t),"%"]})]}),(0,r.jsx)("div",{className:"text-right text-xs text-muted-foreground",children:n?(0,r.jsxs)(r.Fragment,{children:["最終更新: ",new Date(n).toLocaleDateString("ja-JP")]}):(0,r.jsx)(r.Fragment,{children:"未入力"})})]}),(0,r.jsxs)("form",{onSubmit:y,className:"flex space-x-2",children:[(0,r.jsx)(u.p,{type:"number",placeholder:"値を入力",value:c,onChange:e=>x(e.target.value),className:"flex-1",disabled:g}),(0,r.jsx)(h.$,{type:"submit",disabled:g||!c,children:"記録"})]})]})})]})}var g=t(44703);function b(){let[e,s]=(0,a.useState)(null),[t,d]=(0,a.useState)(!0),c=async()=>{try{let e=await fetch("/api/dashboard"),t=await e.json();s(t)}catch(e){console.error("Failed to fetch dashboard:",e)}finally{d(!1)}},x=async(e,s,t)=>{await fetch("/api/updates",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({kpiId:e,value:s,note:t})}),c()};return t?(0,r.jsxs)("div",{className:"min-h-screen bg-gray-50",children:[(0,r.jsx)(n.Y,{}),(0,r.jsx)("main",{className:"container mx-auto px-4 py-8",children:(0,r.jsx)("div",{className:"text-center",children:"読み込み中..."})})]}):e&&0!==e.goals.length?(0,r.jsxs)("div",{className:"min-h-screen bg-gray-50",children:[(0,r.jsx)(n.Y,{}),(0,r.jsxs)("main",{className:"container mx-auto px-4 py-8",children:[(0,r.jsxs)("div",{className:"mb-6 flex items-center justify-between",children:[(0,r.jsxs)("div",{children:[(0,r.jsx)("h1",{className:"text-3xl font-bold",children:"ダッシュボード"}),(0,r.jsx)("p",{className:"text-muted-foreground",children:new Date().toLocaleDateString("ja-JP",{year:"numeric",month:"long",day:"numeric",weekday:"long"})})]}),e.overdueCount>0&&(0,r.jsxs)(l.E,{variant:"destructive",className:"text-lg",children:[(0,r.jsx)(v,{className:"mr-1 h-4 w-4"}),"未更新: ",e.overdueCount,"件"]})]}),(0,r.jsx)("div",{className:"space-y-8",children:e.goals.map(({goal:e,progress:s,kpis:t})=>{var a;return(0,r.jsxs)("div",{className:"space-y-4",children:[(0,r.jsx)(m,{goal:e,progress:s,kpis:t.map(e=>({kpi:e.kpi,overdue:e.overdue})),daysRemaining:(a=e.dueDate)?Math.ceil((a-Date.now())/864e5):null}),(0,r.jsx)("div",{className:"grid gap-4 md:grid-cols-2 lg:grid-cols-3",children:t.map(e=>(0,r.jsx)(j,{kpi:e.kpi,currentValue:e.currentValue,ratio:e.ratio,lastUpdate:e.lastUpdate,overdue:e.overdue,onUpdate:(s,t)=>x(e.kpi.id,s,t)},e.kpi.id))})]},e.id)})})]})]}):(0,r.jsxs)("div",{className:"min-h-screen bg-gray-50",children:[(0,r.jsx)(n.Y,{}),(0,r.jsx)("main",{className:"container mx-auto px-4 py-8",children:(0,r.jsxs)(i.Zp,{className:"mx-auto max-w-2xl",children:[(0,r.jsx)(i.aR,{children:(0,r.jsx)(i.ZB,{children:"KPI管理へようこそ"})}),(0,r.jsxs)(i.Wu,{className:"space-y-4",children:[(0,r.jsx)("p",{className:"text-muted-foreground",children:"まずはGoalとKPIを作成して、進捗を追跡しましょう。"}),(0,r.jsx)(o(),{href:"/setup",children:(0,r.jsxs)(h.$,{children:[(0,r.jsx)(g.A,{className:"mr-2 h-4 w-4"}),"Goalを作成"]})})]})]})})]})}},36518:(e,s,t)=>{"use strict";t.d(s,{Y:()=>o});var r=t(78918),a=t(60349),n=t.n(a),i=t(74754),l=t(77571),d=t(29494);function o(){return(0,r.jsx)("header",{className:"border-b bg-white",children:(0,r.jsxs)("div",{className:"container mx-auto flex h-16 items-center justify-between px-4",children:[(0,r.jsxs)("div",{className:"flex items-center space-x-6",children:[(0,r.jsxs)(n(),{href:"/",className:"flex items-center space-x-2",children:[(0,r.jsx)(i.A,{className:"h-6 w-6 text-primary"}),(0,r.jsx)("span",{className:"text-xl font-bold",children:"KPI管理"})]}),(0,r.jsxs)("nav",{className:"flex items-center space-x-4",children:[(0,r.jsxs)(n(),{href:"/",className:"flex items-center space-x-1 text-sm font-medium text-gray-700 hover:text-primary",children:[(0,r.jsx)(l.A,{className:"h-4 w-4"}),(0,r.jsx)("span",{children:"ダッシュボード"})]}),(0,r.jsxs)(n(),{href:"/setup",className:"flex items-center space-x-1 text-sm font-medium text-gray-700 hover:text-primary",children:[(0,r.jsx)(d.A,{className:"h-4 w-4"}),(0,r.jsx)("span",{children:"設定"})]})]})]}),(0,r.jsx)("div",{className:"flex items-center space-x-2",children:(0,r.jsx)("span",{className:"text-sm text-muted-foreground",children:"ユーザー: A"})})]})})}},87079:(e,s,t)=>{"use strict";t.d(s,{E:()=>l});var r=t(78918);t(83943);var a=t(30177),n=t(93899);let i=(0,a.F)("inline-flex items-center rounded-full border px-2.5 py-0.5 text-xs font-semibold transition-colors focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2",{variants:{variant:{default:"border-transparent bg-primary text-primary-foreground hover:bg-primary/80",secondary:"border-transparent bg-secondary text-secondary-foreground hover:bg-secondary/80",destructive:"border-transparent bg-destructive text-destructive-foreground hover:bg-destructive/80",outline:"text-foreground"}},defaultVariants:{variant:"default"}});function l({className:e,variant:s,...t}){return(0,r.jsx)("div",{className:(0,n.cn)(i({variant:s}),e),...t})}},30352:(e,s,t)=>{"use strict";t.d(s,{$:()=>o});var r=t(78918),a=t(83943),n=t(26415),i=t(30177),l=t(93899);let d=(0,i.F)("inline-flex items-center justify-center whitespace-nowrap rounded-md text-sm font-medium ring-offset-background transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50",{variants:{variant:{default:"bg-primary text-primary-foreground hover:bg-primary/90",destructive:"bg-destructive text-destructive-foreground hover:bg-destructive/90",outline:"border border-input bg-background hover:bg-accent hover:text-accent-foreground",secondary:"bg-secondary text-secondary-foreground hover:bg-secondary/80",ghost:"hover:bg-accent hover:text-accent-foreground",link:"text-primary underline-offset-4 hover:underline"},size:{default:"h-10 px-4 py-2",sm:"h-9 rounded-md px-3",lg:"h-11 rounded-md px-8",icon:"h-10 w-10"}},defaultVariants:{variant:"default",size:"default"}}),o=a.forwardRef(({className:e,variant:s,size:t,asChild:a=!1,...i},o)=>{let c=a?n.DX:"button";return(0,r.jsx)(c,{className:(0,l.cn)(d({variant:s,size:t,className:e})),ref:o,...i})});o.displayName="Button"},93174:(e,s,t)=>{"use strict";t.d(s,{Wu:()=>o,ZB:()=>d,Zp:()=>i,aR:()=>l});var r=t(78918),a=t(83943),n=t(93899);let i=a.forwardRef(({className:e,...s},t)=>(0,r.jsx)("div",{ref:t,className:(0,n.cn)("rounded-lg border bg-card text-card-foreground shadow-sm",e),...s}));i.displayName="Card";let l=a.forwardRef(({className:e,...s},t)=>(0,r.jsx)("div",{ref:t,className:(0,n.cn)("flex flex-col space-y-1.5 p-6",e),...s}));l.displayName="CardHeader";let d=a.forwardRef(({className:e,...s},t)=>(0,r.jsx)("h3",{ref:t,className:(0,n.cn)("text-2xl font-semibold leading-none tracking-tight",e),...s}));d.displayName="CardTitle",a.forwardRef(({className:e,...s},t)=>(0,r.jsx)("p",{ref:t,className:(0,n.cn)("text-sm text-muted-foreground",e),...s})).displayName="CardDescription";let o=a.forwardRef(({className:e,...s},t)=>(0,r.jsx)("div",{ref:t,className:(0,n.cn)("p-6 pt-0",e),...s}));o.displayName="CardContent",a.forwardRef(({className:e,...s},t)=>(0,r.jsx)("div",{ref:t,className:(0,n.cn)("flex items-center p-6 pt-0",e),...s})).displayName="CardFooter"},41746:(e,s,t)=>{"use strict";t.d(s,{p:()=>i});var r=t(78918),a=t(83943),n=t(93899);let i=a.forwardRef(({className:e,type:s,...t},a)=>(0,r.jsx)("input",{type:s,className:(0,n.cn)("flex h-10 w-full rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background file:border-0 file:bg-transparent file:text-sm file:font-medium placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50",e),ref:a,...t}));i.displayName="Input"},93899:(e,s,t)=>{"use strict";t.d(s,{cn:()=>n});var r=t(84195),a=t(3490);function n(...e){return(0,a.QP)((0,r.$)(e))}},21234:(e,s,t)=>{"use strict";t.r(s),t.d(s,{default:()=>n,metadata:()=>a});var r=t(14506);t(41231);let a={title:"KPI管理 - Goal & KPI Tracker",description:"2人で運営する会社向けKPI管理アプリ"};function n({children:e}){return(0,r.jsx)("html",{lang:"ja",children:(0,r.jsx)("body",{children:e})})}},17385:(e,s,t)=>{"use strict";t.r(s),t.d(s,{default:()=>r});let r=(0,t(24186).registerClientReference)(function(){throw Error("Attempted to call the default export of \"/Users/kawashimariku/Desktop/KPI管理/src/app/page.tsx\" from the server, but it's on the client. It's not possible to invoke a client function from the server, it can only be rendered as a Component or passed to props of a Client Component.")},"/Users/kawashimariku/Desktop/KPI管理/src/app/page.tsx","default")},41231:()=>{}};var s=require("../webpack-runtime.js");s.C(e);var t=e=>s(s.s=e),r=s.X(0,[442,793,308],()=>t(62800));module.exports=r})();